<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title id="EnterName"></title>
    <link rel="stylesheet" href="css/bx-cover.css">
    <link rel="stylesheet" href="css/fixed-table.css">
    <link rel="stylesheet" href="css/base.css">
    <link rel="stylesheet" href="css/header.css">
    <link rel="stylesheet" type="text/css" href="css/buyorder.css">
    <link rel="stylesheet" href="css/list-scroll.css">
    <script src="js/jquery-1.8.3.min.js"></script>
    <script src="js/rem.js"></script>
    <script src="js/base.js"></script>
    <script src="js/fixed-table.js"></script>
    <style>
        .makesth {
            font-weight: bold;
            color: #4d596e;
        }

        .date {
            font-size: 0.28rem;
            color: #bec7d4;
        }

        .num {
            font-size: 0.28rem;
            color: #818da1;
        }

        .numValue {
            color: #57adfc;
        }

        .text {
            font-size: 0.28rem;
            color: #818da1;
        }


        .order_change{
            white-space: nowrap;
            overflow-x: scroll;
            overflow-y: hidden;
        }


        .order_change ::-webkit-scrollbar {
            display: none;
        }


    </style>
</head>
<body class="main">
    <header class="clearfix bg">
        <div class="top clearfix">
            <div class="pull-left" id="oTitle">

            </div>
            <div class="pull-right">
                <a href="#"><img src="image/header_tr.png" alt=""></a>
                <ul>
                    <li><a href="#">用户参数</a></li>
                    <li><a href="#">修改密码</a></li>
                    <li><a href="javascript:QHYG();">重新登录</a></li>
                    <li><a href="#">升级</a></li>
                    <li><a href="#">注册信息</a></li>
                    <li><a href="#">联系我们</a></li>
                </ul>
            </div>
        </div>
    </header>
    <div class="content buyorder buyorder2">
        <div class="top">
            <ul class="clearfix">
                <li>
                    <a href="javascript:CYCK();">
                        <img src="image/order_icon1_active.png" alt="">
                        <p>查询</p>
                    </a>
                </li>
                <li id="liBtnSC" style="display:none">
                    <a href="javascript:SubmitSC();">
                        <img src="image/shoucang.png" alt="">
                        <p>收藏</p>
                    </a>
                </li>
                <li id="liBtnQXSC" style="display:none">
                    <a href="javascript:SubmitQXSC();">
                        <img src="image/quxiao.png" alt="">
                        <p>取消收藏</p>
                    </a>
                </li>
                <li class="active" id="liaJZ" >
                    <a href="javascript:JZXS();">
                        <img id="imgJuzheng" src="image/option/pressed.png" alt="">
                        <p>矩阵</p>
                    </a>
                </li>
                <li style="display:none">
                    <a href="#">
                        <img src="image/quxiao.png" alt="">
                        <p></p>
                    </a>
                </li>
            </ul>
        </div>
        <div class="bottom order_change"  style="height:100%">
            <div id="ChildQuery" class="bottom_input bottom_input2 bottom-list-scroll"  style="height: calc(100% - 1.6rem);display:none" >
                <div class="list Childlist-scroll">
                    <ul id="ulList"></ul>
                </div>
                <div style="bottom: 1.2rem;" class="count clearfix bottom-fixed" id="divTotal"></div>
            </div>
            <div id="TabQuery" class="bottom_input bottom_input2 bottom-list-scroll" style="display:none">
                <div class="list list-scroll">
                    <div style="height: 100%;">
                        <div class="fixed-table-box row-col-fixed">
                            <div class="fixed-table_header-wraper">
                                <table class="fixed-table_header" id="tableTitle1" cellspacing="0" cellpadding="0" border="0">
                                    <thead>
                                        <tr id="thTitles"></tr>
                                    </thead>
                                </table>
                            </div>
                            <div class="fixed-table_body-wraper">
                                <table class="fixed-table_body" id="tableTitle4" cellspacing="0" cellpadding="0" border="0">
                                    <tbody id="tbodyData"></tbody>
                                </table>
                            </div>
                            <div class="fixed-table_fixed fixed-table_fixed-left" style="height: 284px;">
                                <div class="fixed-table_header-wraper">
                                    <table class="fixed-table_header" cellspacing="0" cellpadding="0" border="0">
                                        <thead>
                                            <tr>
                                                <th class="w-50">
                                                    <div class="table-cell">序号</div>
                                                </th>
                                            </tr>
                                        </thead>
                                    </table>
                                </div>
                                <div class="fixed-table_body-wraper">
                                    <table class="fixed-table_body" id="tableTitle2" cellspacing="0" cellpadding="0" border="0">
                                        <tbody id="tbodyNo"></tbody>
                                    </table>
                                </div>
                                <div class="fixed-table_header-wraper fixed-table_bottom_left-wraper">
                                    <table class="fixed-table_header" cellspacing="0" cellpadding="0" border="0">
                                        <thead>
                                            <tr>
                                                <th class="w-50">
                                                    <div class="table-cell">合计行</div>
                                                </th>
                                            </tr>
                                        </thead>
                                    </table>
                                </div>
                            </div>
                            <div class="fixed-table_header-wraper fixed-table_bottom-wraper">
                                <table class="fixed-table_header" id="tableTitle3" cellspacing="0" cellpadding="0" border="0">
                                    <thead>
                                        <tr id="trSum"></tr>
                                    </thead>
                                </table>
                            </div>
                            <div class="fixed-table-box_fixed-right-patch"></div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <nav>
        <ul class="clearfix">
            <li>
                <a href="javascript:MUSY();">
                    <img src="image/nav_icon1.png" alt="">
                    <p>首页</p>
                </a>
            </li>
            <li class="active">
                <a href="javascript:MULB();">
                    <img src="image/nav_icon2_active.png" alt="">
                    <p>列表</p>
                </a>
            </li>
            <li>
                <a href="javascript:MUXX();">
                    <img src="image/nav_icon3.png" alt="">
                    <p>消息</p>
                </a>
            </li>
            <li>
                <a href="javascript:MUWD();">
                    <img src="image/nav_icon4.png" alt="">
                    <p>我的</p>
                </a>
            </li>
        </ul>
    </nav>
    <script src="js/jdate.min.js"></script>
    <script src="js/touch.min.js"></script>
    <link href="layui/css/layui.css" rel="stylesheet" />
    <script src="layui/layui.all.js"></script>
    <script src="js/genericScript.js"></script>
    <script>

        function JZXS() {
            if ($("#liaJZ").attr("class") == "active") {
                $("#liaJZ").removeClass("active");
                $("#imgJuzheng").attr('src', "image/option/pressed2.png");
            }
            else {
                $("#liaJZ").addClass("active");
                $("#imgJuzheng").attr('src', "image/option/pressed.png");
            }

            loadListData();
        }
        function SubmitQXSC() {
            var authorization = localStorage.getItem("authorization");
            var STToken = localStorage.getItem("STToken");
            var userr = localStorage.getItem("userr");
            var UntOwn = localStorage.getItem("UntOwn");
            var Ord_cap = localStorage.getItem("Ord_cap");
            var loadIndex = -1;
            $.ajax({
                type: "Post",
                url: Common.getRemotePort() + "Menu/SaveMenu" + Common.jsNC2(),
                contentType: "application/x-www-form-urlencoded",
                data: { 'userr': userr, 'unit_own': Ord_cap, 'opsty': 2 },
                headers: {
                    'Authorization': 'Bearer ' + authorization,
                    'STToken': STToken
                },
                success: function (data) {
                    var returnValue = eval(data);
                    if (returnValue) {
                        //var rtData = eval(returnValue.Message);

                        localStorage.setItem("FdMenu", false);
                        layer.msg('取消收藏成功。');
                        $("#liBtnQXSC").hide();// = "";
                        $("#liBtnSC").hide();// = "none";
                    }
                    else {
                        layer.msg("取消收藏失败。");
                    }
                },
                error: function (XMLHttpRequest, textStatus, errorThrown) {
                    if (textStatus == "error") {
                        layer.msg("网络异常:" + XMLHttpRequest.status);
                    }
                    layer.close(loadIndex);
                }
            });
        }
        function SubmitSC() {

            //layer.msg(itm_n);
            //window.location.href = "audit.html"
            var authorization = localStorage.getItem("authorization");
            var STToken = localStorage.getItem("STToken");
            var userr = localStorage.getItem("userr");
            var UntOwn = localStorage.getItem("UntOwn");
            var Ord_cap = localStorage.getItem("Ord_cap");
            var loadIndex = -1;
            $.ajax({
                type: "Post",
                url: Common.getRemotePort() + "Menu/SaveMenu" + Common.jsNC2(),
                contentType: "application/x-www-form-urlencoded",
                data: { 'userr': userr, 'unit_own': Ord_cap, 'opsty': 1 },
                headers: {
                    'Authorization': 'Bearer ' + authorization,
                    'STToken': STToken
                },
                success: function (data) {
                    var returnValue = eval(data);
                    if (returnValue) {
                        //var rtData = eval(returnValue.Message);

                        layer.msg('收藏成功。');
                        localStorage.setItem("FdMenu", true);
                        $("#liBtnQXSC").hide();
                        $("#liBtnSC").hide();
                    }
                    else {
                        layer.msg("收藏失败。");
                    }
                },
                error: function (XMLHttpRequest, textStatus, errorThrown) {
                    if (textStatus == "error") {
                        layer.msg("网络异常:" + XMLHttpRequest.status);
                    }
                    layer.close(loadIndex);
                }
            });
        }
        function GetMainUnit() {
            var authorization = localStorage.getItem("authorization");
            var STToken = localStorage.getItem("STToken");
            var userr = localStorage.getItem("userr");
            var UntOwn = localStorage.getItem("UntOwn");
            //var Caption = localStorage.getItem("Caption");
            //var queryCriteria = localStorage.getItem("QueryCriteria");
            $.ajax({
                type: "Get",
                async: false,
                url: Common.getWeChatRemotePort() + "Unit/MainUnit" + Common.jsNC2(),
                data: { 'UserName': Common.getDefaultUser(), 'Untown': UntOwn },
                headers: {
                    'Authorization': 'Bearer ' + authorization,
                    'STToken': STToken
                },
                success: function (data) {
                    var returnValue = eval(data);
                    if (returnValue.Code == 1) {
                        localStorage.setItem("UnitItems", returnValue.JsonList);
                        //var ListData = eval(returnValue.ListJson);
                    }
                    else {
                        layer.msg(returnValue.Message);
                    }
                },
                error: function (XMLHttpRequest, textStatus, errorThrown) {
                    if (textStatus == "error") {
                        layer.msg("网络异常:" + XMLHttpRequest.status);
                    }
                }
            });
        }
        function OrderAppend() {
            window.location.href = "order_add.html";
        }
        function QHYG() {

            localStorage.removeItem("authorization");
            localStorage.removeItem("STToken");
            localStorage.removeItem("userr");
            window.location.href = "login.html";
        }
        function CYCK() {
            window.location.href = "singlesearch.html";
        }
        function MUSY() {
            window.location.href = "index.html";
        }
        function MULB() {
            window.location.href = "singletable.html";
        }
        function MUXX() {
            window.location.href = "infolist.html";
        }
        function MUWD() {
            window.location.href = "me.html";
        }
        function YHTS() {
            layer.msg('您没有权限访问，请与管理员联系。');
        }
        function OrderEdit() {

            var TabName = localStorage.getItem("TabName");
            var IndexCol = localStorage.getItem("IndexCol");
            var IndexColValue = localStorage.getItem("IndexColValue");
            var Itemno = localStorage.getItem("Itemno");
            if (!TabName || !IndexColValue || !IndexCol || !Itemno) {
                layer.msg('请选择数据。');
                return;
            }
            window.location.href = "singledetal.html";
        }
        function changeLiActive(TabName, IndexCol, IndexColValue) {
            localStorage.setItem("TabName", TabName);
            localStorage.setItem("IndexCol", IndexCol);
            localStorage.setItem("IndexColValue", IndexColValue);
            localStorage.setItem("Itemno", IndexColValue);

            $("#ulList li").each(function () {
                $(this).removeClass("active");
            });
            $("#" + IndexColValue).addClass("active");
        }
        function GTDETAIL(TabName, IndexCol, IndexColValue, n) {

            if (!IndexCol || !IndexColValue) {
                layer.msg('单据没有索引，请与管理员联系。');
                return;
            }
            localStorage.setItem("Itemno", IndexColValue);
            localStorage.setItem("TabName", TabName);
            localStorage.setItem("IndexCol", IndexCol);
            localStorage.setItem("IndexColValue", IndexColValue);

            window.location.href = "singledetail.html";
        }
        var form = layui.form,
            layedit = layui.layedit,
            laydate = layui.laydate,
            $ = layui.$;
        layer.ready(function () {

            localStorage.setItem("ISLoadImage", "No");
            Common.CheckUserLogin();
            var EnterName = localStorage.getItem("EnterName");
            $("#EnterName").html(EnterName);
            var authorization = localStorage.getItem("authorization");
            var STToken = localStorage.getItem("STToken");
            var userr = localStorage.getItem("userr");
            var UntOwn = localStorage.getItem("UntOwn");
            var Caption = localStorage.getItem("Caption");
            var FdMenu = localStorage.getItem("FdMenu");
            if (FdMenu == "true") {
                $("#liBtnQXSC").hide();
                $("#liBtnSC").hide();
            }
            else {
                $("#liBtnQXSC").hide();
                $("#liBtnSC").hide();
            }
            $("#oTitle").html(Caption);
            var queryCriteria = localStorage.getItem("QueryCriteria");
            localStorage.removeItem("TabName");
            localStorage.removeItem("IndexCol");
            localStorage.removeItem("IndexColValue");
            localStorage.removeItem("Itemno");
            localStorage.removeItem("UnitItems");
            GetMainUnit();
            loadListData();
        });


        function loadListData() {
            var queryCriteria = localStorage.getItem("QueryCriteria");
            var authorization = localStorage.getItem("authorization");
            var STToken = localStorage.getItem("STToken");
            var userr = localStorage.getItem("userr");
            var UntOwn = localStorage.getItem("UntOwn");
            var Caption = localStorage.getItem("Caption");
            var FdMenu = localStorage.getItem("FdMenu");
            var Storted_set;
            var SqlString;
            var ParentOwn;
            var Capstring;

            var units = eval(localStorage.getItem("UnitItems"));
            if (units != undefined && units != null && units != '') {
                var loadIndex = -1;
                $.each(units, function (n, item) {
                    if (item.Caption == "parenttab") {
                        Storted_set = item.Storted_set;
                        SqlString = item.SqlString;
                        Capstring = item.Capstring;
                        ParentOwn = item.Owner;
                    }
                });
                $("#divTotal").empty();
                $("#TabQuery").css('display', 'none');
                $("#ChildQuery").css('display', 'none');
                $("#thTitles").empty();
                $("#tbodyNo").empty();
                $("#tbodyData").empty();
                $("#trSum").empty();

                var EventKeys = localStorage.getItem("EventKeys");

                if ($("#liaJZ").attr("class") != "active") {

                    $("#TabQuery").css('display', 'block');

                    
                    $("#tableTitle1").css("width", "0px");
                    $("#tableTitle4").css("width", "0px");
                    $("#tableTitle2").css("width", "0px");
                    $("#tableTitle3").css("width", "0px");

                    

                    $(".fixed-table-box").fixedTable();
                    $("body").on("click", ".lab", function () {
                        $(this).attr("class", "lab onCheck");
                        $(this).siblings().attr("class", "lab");
                    })
                    touch.on(".order_change .bottom_input2 .list li", 'tap', function () {
                        $(this).parents("li").addClass("active");
                        $(this).parents("li").siblings().removeClass("active");
                    })
                    touch.on(".order_change .bottom_input2 .list li", 'doubletap', function () {
                        window.location.href = "order_mode.html";
                    });
                    touch.on(".hover-main div:first-child", 'doubletap', function () {
                        $(this).parent().find(".hover-text").show();
                    });

                    $.ajax({
                        type: "Get",
                        async: false,
                        url: Common.getWeChatRemotePort() + "OrderDetail/TabFields" + Common.jsNC2(),
                        data: { 'UserName': Common.getDefaultUser(), 'Datasetown': ParentOwn },
                        beforeSend: function (request) {
                            loadIndex = layer.load(1, { shade: [0.8, '#393D49'] });
                        },
                        success: function (data) {
                            var returnValue = eval(data);
                            if (returnValue.Code == 1) {
                                Fields = returnValue.Fields;
                            }
                            else {
                                layer.msg(returnValue.Message);
                            }
                        },
                        error: function (XMLHttpRequest, textStatus, errorThrown) {
                            if (textStatus == "error") {
                                layer.msg("网络异常:" + XMLHttpRequest.status);
                            }
                        }
                    });

                    $.ajax({
                        type: "Post",
                        url: Common.getRemotePort() + "OrderDetail/OrderTab" + Common.jsNC2(),
                        data: { 'UserName': userr, 'Datasetown': ParentOwn, 'UntOwn': UntOwn, 'SqlString': SqlString, 'Capstring': Capstring, 'Storted_set': Storted_set, 'Caption': Caption, 'Fields': Fields, 'QueryCriteria': queryCriteria},
                        headers: {
                            'Authorization': 'Bearer ' + authorization,
                            'STToken': STToken
                        },
                        success: function (data) {

                            var returnValue = data;
                            if (returnValue.Code == 1) {
                                var liParentX = $("<th data-fixed=\"true\" class=\"w-50\"><div class=\"table-cell\">序号</div></th>");
                                $("#thTitles").append(liParentX);

                                var trParentSum = $("<th class=\"w-50\" data-fixed=\"true\"><div class=\"table-cell\"></div></th>");
                                $("#trSum").append(trParentSum);

                                $.each(returnValue.Cols, function (n, item) {
                                    var liParent = $("<th class=\"w-" + item.Width + "\"><div class=\"table-cell\">" + item.ColumnCNName + "</div></th>");
                                    $("#thTitles").append(liParent);
                                    var liParentSum = $("<th class=\"w-" + item.Width + " border-right-0\"><div class=\"table-cell\">" + item.Sum + "</div></th>");
                                    $("#trSum").append(liParentSum);

                                });

                                var dataList = eval(returnValue.JsonList);
                                // alert(dataList.length);
                                for (var i = 0; i < dataList.length; i++) {

                                    var trData = $("<tr></tr>");
                                    var tdDataFirst = $("<td class=\"w-50\"><div class=\"table-cell\">" + (i + 1) + "</div></td>");

                                    trData.append(tdDataFirst);

                                    var trDataNo = $("<tr></tr>");
                                    var tdDataFirstNo = $("<td class=\"w-50\"><div class=\"table-cell\">" + (i + 1) + "</div></td>");

                                    trDataNo.append(tdDataFirstNo);
                                    $("#tbodyNo").append(trDataNo);

                                    $.each(returnValue.Cols, function (m, itemData) {
                                        var tdData = $("<td  class=\"w-" + itemData.Width + " hover-main\"><div class=\"table-cell\">" + dataList[i][itemData.ColumnName] + "</div></td>");
                                        trData.append(tdData);
                                    });

                                    $("#tbodyData").append(trData);
                                }

                                $(".fixed-table-box").fixedTable();
                                $("body").on("click", ".lab", function () {
                                    $(this).attr("class", "lab onCheck");
                                    $(this).siblings().attr("class", "lab");
                                })
                                touch.on(".order_change .bottom_input2 .list li", 'tap', function () {
                                    $(this).parents("li").addClass("active");
                                    $(this).parents("li").siblings().removeClass("active");
                                })
                                touch.on(".order_change .bottom_input2 .list li", 'doubletap', function () {
                                    window.location.href = "order_mode.html";
                                });
                                touch.on(".hover-main div:first-child", 'doubletap', function () {
                                    $(this).parent().find(".hover-text").show();
                                });
                                var strNum = 10;
                                $(".hover-main").each(function () {
                                    var str = $(this).find("div").text().trim();
                                    if (str.length > strNum) {
                                        $(this).find("div").text(str.slice(0, 10) + "...");
                                        $(this).append(`
                                                                    <div class="hover-text" style="z-index:2;">
                                                                        <p>${str}</p>
                                                                        <a href="javascript:;" class="hover-close"></a>
                                                                    </div>
                                                                    `);
                                        $(this).find("a.hover-close").click(function () {
                                            $(this).parent().hide();
                                        })
                                    };
                                })
                            }
                            else {
                                layer.msg(returnValue.Message);
                            }
                            layer.close(loadIndex);

                        },
                        error: function (XMLHttpRequest, textStatus, errorThrown) {
                            if (textStatus == "error") {
                                layer.msg("网络异常:" + XMLHttpRequest.status);
                            }
                        }
                    });


                }
                else {

                    $("#ChildQuery").css('display', 'block');

                    $.ajax({
                        type: "Get",
                        async: false,
                        url: Common.getWeChatRemotePort() + "OrderList/Syllable" + Common.jsNC2(),
                        data: { 'UserName': Common.getDefaultUser(), 'Untown': UntOwn },
                        beforeSend: function (request) {
                            loadIndex = layer.load(1, { shade: [0.8, '#393D49'] });
                        },
                        complete: function () {
                            layer.close(loadIndex);
                        },
                        success: function (data) {
                            var returnValue = eval(data);
                            if (returnValue.Code == 1) {
                                Syllables = returnValue.Syllable;
                                indexCol = returnValue.IndexCol;
                            }
                            else {
                                layer.msg(returnValue.Message);
                            }
                        },
                        error: function (XMLHttpRequest, textStatus, errorThrown) {
                            layer.close(loadIndex);
                            if (textStatus == "error") {
                                layer.msg("网络异常:" + XMLHttpRequest.status);
                            }
                        }
                    });
                    $.ajax({
                        type: "Post",
                        url: Common.getRemotePort() + "OrderList/ListData" + Common.jsNC2(),
                        data: { 'UserName': userr, 'Untown': UntOwn, 'SqlString': SqlString, 'Capstring': Capstring, 'Storted_set': Storted_set, 'QueryCriteria': queryCriteria, 'indexCol': indexCol, 'Syllables': Syllables, 'EventKeys': EventKeys },
                        headers: {
                            'Authorization': 'Bearer ' + authorization,
                            'STToken': STToken
                        },
                        beforeSend: function (request) {
                            loadIndex = layer.load(1, { shade: [0.8, '#393D49'] });
                        },
                        complete: function () {
                            layer.close(loadIndex);
                        },
                        success: function (data) {

                            $("#divTotal").empty();
                            var returnValue = eval(data);
                            if (returnValue.Code == 1) {
                                var ListData = eval(returnValue.ListJson);
                                var ColTitles = eval(returnValue.ColTitles);
                                var TabName = returnValue.TabName;

                                $("#divTotal").append(returnValue.ColTotals);
                                $("#ulList").empty();

                                $.each(ListData, function (n, item) {
                                    var liList = $("<li ondblclick=\"GTDETAIL('" + TabName + "','" + returnValue.IndexCol + "','" + item[returnValue.IndexCol] + "','" + n + "')\" onclick=\"changeLiActive('" + TabName + "','" + returnValue.IndexCol + "','" + item[returnValue.IndexCol] + "')\" id=" + item[returnValue.IndexCol] + "></li>");
                                    var aList = $("<a href=\"javascript:;\"></a>");
                                    var divList;
                                    var isNew = true;

                                    $.each(ColTitles, function (m, itemTitle) {
                                        if (itemTitle.big_wth) {
                                            if (!isNew) {
                                                aList.append(divList);
                                            }
                                            var divList2 = $("<div class=\"num clearfix\"></div>")
                                            var divItemList2 = $("<div class=\"pull-left text\" style=\"text-overflow: ellipsis;width: 6.1rem;white-space: nowrap;overflow: hidden\">" + itemTitle.DisplayName + "：" + item[itemTitle.Name] + "</div>")
                                            divList2.append(divItemList2);
                                            aList.append(divList2);
                                            isNew = true;
                                        }
                                        else {
                                            if (isNew) {
                                                divList = $("<div class=\"num clearfix\"></div>")
                                                var divItemList = $("<div class=\"pull-left " + itemTitle.Style + "\" style=\"text-overflow: ellipsis;width: 3.1rem;white-space: nowrap;overflow: hidden\">" + itemTitle.DisplayName + "：" + item[itemTitle.Name] + "</div>")
                                                divList.append(divItemList);
                                                isNew = false;
                                            }
                                            else {
                                                var divItemList = $("<div class=\"pull-right " + itemTitle.Style + "\" style=\"text-overflow: ellipsis;width: 3.1rem;white-space: nowrap;overflow: hidden\">" + itemTitle.DisplayName + "：" + item[itemTitle.Name] + "</div>")
                                                divList.append(divItemList);
                                                isNew = true;
                                            }
                                            if (isNew || ColTitles.length - 1 == m) {
                                                aList.append(divList);
                                            }
                                        }
                                    });



                                    liList.append(aList);
                                    $("#ulList").append(liList);
                                });
                            }
                            else {
                                layer.msg(returnValue.Message);
                            }
                        },
                        error: function (XMLHttpRequest, textStatus, errorThrown) {
                            layer.close(loadIndex);
                            if (textStatus == "error") {
                                layer.msg("网络异常:" + XMLHttpRequest.status);
                            }
                        }
                    });
                }
            }
            else {
                layer.msg('请联系管理员，没有找到模块');
            }
        }
    </script>
</body>
</html>
